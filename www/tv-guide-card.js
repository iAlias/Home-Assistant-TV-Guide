class TvGuideCard extends HTMLElement{setConfig(c){if(!c.now_entity||!c.prime_entity)throw new Error('now_entity e prime_entity obbligatori');this._config=c}set hass(h){const c=this._config;if(!this.content){const e=document.createElement('ha-card');e.header=c.title||'Guida TV',this.content=document.createElement('div'),this.content.style.padding='16px',this.content.style.display='grid',this.content.style.rowGap='12px',e.appendChild(this.content),this.appendChild(e)}const n=h.states[c.now_entity],p=h.states[c.prime_entity],a=c.channels||[],o=n?n.attributes.programmi_correnti||{}:{},r=p?p.attributes.prima_serata||{}:{};const l=(e,t)=>{let s=`<h3 style="margin:4px 0;">${e}</h3>`;return s+='<ul style="list-style:none;padding:0;margin:0;">',a.forEach(i=>{const u=t[i]||'<span style="opacity:0.6;">â€”</span>';s+=`<li style="display:flex;justify-content:space-between;padding:2px 0;border-bottom:1px solid var(--divider-color);"><span>${i}</span><span style="font-weight:500">${u}</span></li>`}),s+='</ul>',s};this.content.innerHTML=`${l('Ora in onda',o)}${l('Stasera in TV',r)}`;}getCardSize(){return 3}}customElements.define('tv-guide-card',TvGuideCard);
